<html layout:decorate="~{common/layout}">
<div layout:fragment="content">

    <div class="search_container">
        <div class="search_body">

            <div class="search_scrap">
                <div class="search_scrap_title sTitle">๐ฅ์คํฌ๋ฉ ๊ฒ์๊ธ๐ฅ</div>
                <div class="search_scrap_section sSec">
                    <div class="search_scrap_Info sInfo" th:each="report, loop : ${reportList}">
                         <a th:href="@{|/report/detail/${report.id}|}">์คํฌ๋ฉ ๊ฒ์๊ธ</a>

                         <div class="sInfo_text" th:text="${report.title}"></div>
                    </div>
                         <button th:if="${#lists.size(reportList) > 4}" class="prevBtn1 pB">&#10094;</button>
                         <button th:if="${#lists.size(reportList) > 4}" class="nextBtn1 nB">&#10095;</button>
                        <p class="nullReportText" th:if="${#lists.size(reportList) == 0}">๊ฒ์๊ธ์ด ์์ต๋๋ค.</p>
                </div>
            </div>

            <div class="search_myList">
                <div class="search_myList_title sTitle">๐ก๋ด๊ฐ ์ด ๊ฒ์๊ธ๐ก</div>
                <div class="search_myList_section sSec">
                    <div class="search_myList_Info sInfo" th:each="freedcs : ${freedcsList}">
                        <a th:href="@{|/discussion/free_detail/${freedcs.id}|}">
                            <img th:src="@{|/file/${freedcs.thumbnailImg}|}" alt="์ธ๋ค์ผ" class="thumbnail">
                        </a>
                        <div class="sInfo_text">
                            <span th:text="${#strings.length(freedcs.title) > 18 ? #strings.substring(freedcs.title, 0, 18) + '....' : freedcs.title}"></span>
                        </div>
                    </div>
                    <button th:if="${#lists.size(freedcsList) > 4}" class="prevBtn2 pB">&#10094;</button>
                    <button th:if="${#lists.size(freedcsList) > 4}" class="nextBtn2 nB">&#10095;</button>
                    <p class="nullReportText" th:if="${#lists.size(freedcsList) == 0}">๊ฒ์๊ธ์ด ์์ต๋๋ค.</p>
                </div>
            </div>

            <div class="search_report">
                <div class="search_report_title sTitle">๐ก๋์ QnA๐ก</div>
                <div class="search_report_section sSec">
                    <div class="search_report_Info sInfo" th:each="report, loop : ${reportList}">
                        <a th:href="@{|/report/detail/${report.id}|}" th:text="${report.title}">
                            </a>
                    </div>
                    <button th:if="${#lists.size(reportList) > 4}" class="prevBtn3 pB">&#10094;</button>
                    <button th:if="${#lists.size(reportList) > 4}" class="nextBtn3 nB">&#10095;</button>
                    <p class="nullReportText" th:if="${#lists.size(reportList) == 0}">๊ฒ์๊ธ์ด ์์ต๋๋ค.</p>
                </div>
            </div>

        </div>
    </div>
</div>
</html>
<script>
const scrapSection = document.querySelector('.search_scrap_section');
const scrapList = document.querySelectorAll('.search_scrap_Info');
const myListSection = document.querySelector('.search_myList_section');
const myListList = document.querySelectorAll('.search_myList_Info');
const reportSection = document.querySelector('.search_report_section');
const reportList = document.querySelectorAll('.search_report_Info');


let index1 = 0;
let index2 = 0;
let index3 = 0;

function showItems1() {
    scrapList.forEach((item, i) => {
        if (i >= index1 && i < index1 + 4) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
}

function showItems2() {
    myListList.forEach((item, i) => {
        if (i >= index2 && i < index2 + 4) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
}

function showItems3() {
    reportList.forEach((item, i) => {
        if (i >= index3 && i < index3 + 4) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
}



showItems1();
showItems2();
showItems3();

document.querySelector('.nextBtn1').addEventListener('click', () => {
    index1 = Math.min(index1 + 4, scrapList.length - 4);
    showItems1();
});

document.querySelector('.prevBtn1').addEventListener('click', () => {
    index1 = Math.max(index1 - 4, 0);
    showItems1();
});

document.querySelector('.nextBtn2').addEventListener('click', () => {
    index2 = Math.min(index2 + 4, myListList.length - 4);
    showItems2();
});

document.querySelector('.prevBtn2').addEventListener('click', () => {
    index2 = Math.max(index2 - 4, 0);
    showItems2();
});

document.querySelector('.nextBtn3').addEventListener('click', () => {
    index3 = Math.min(index3 + 4, reportList.length - 4);
    showItems3();
});

document.querySelector('.prevBtn3').addEventListener('click', () => {
    index3 = Math.max(index3 - 4, 0);
    showItems3();
});

</script>
